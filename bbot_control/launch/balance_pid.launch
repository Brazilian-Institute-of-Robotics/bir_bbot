<launch>

    <!-- launch PID Manager -->
    <node name="pid_redirect" pkg="bbot_control" type="pid_redirect.py" output="screen">
        <remap from="imu" to="/bbot/imu"/>
        <remap from="cmd_vel" to="/bbot/mobile_base_controller/cmd_vel"/>
        <param name="setpoint" value="0.085" />
    </node>

    <!-- PID Tunings for the record-->
    <!-- Acc. 10, Kp:-10, Ki:-20, Kd:-0.9 -->
    <!-- Acc. 4.0, Kp: -20, Ki:-50, Kd:-2.0  -->
    <!-- Acc. 5.0, Kp: -5.0, Ki:-50, Kd:-1.0 (Most stable) -->

    <!-- launch PID node -->
    <node name="balancing_pid" pkg="pid" type="controller" output="screen" >
      <param name="Kp" value="-5.0" /> 
      <param name="Ki" value="-50.0" />
      <param name="Kd" value="-1.0"/>
      <param name="upper_limit" value="2.0" />
      <param name="lower_limit" value="-2.0" />
      <param name="windup_limit" value="0.1" />
      <param name="cutoff_frequency" value="20" />
      <param name="max_loop_frequency" value="105.0" />
      <param name="min_loop_frequency" value="95.0" />
      <param name="setpoint_timeout" value="-1.0" />
      <remap from="setpoint" to="/setpoint" />
     </node>

    <!-- <node name="setpoint_node" pkg="pid" type="setpoint_node" output="screen" /> -->

    <!-- rqt_plot is a resource hog, so if you're seeing high CPU usage, don't launch rqt_plot  -->
    <node name="rqt_plot" pkg="rqt_plot" type="rqt_plot"
    args="/control_effort/data /state/data /setpoint/data" />

    <!-- <node name="rqt_reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure" /> -->

    <!-- <node name="rqt_robot_monitor" pkg="rqt_robot_monitor" type="rqt_robot_monitor" /> -->
</launch>